<div metal:use-macro="load: ../shared/_layout.pt">
<__additional_script__ metal:fill-slot="additional_script" tal:omit-tag="True">
  <script src="/public/scripts/show-subcategories.js" defer></script>
  <script src="/public/scripts/limit-select-size.js" defer></script>
  <script src="/public/scripts/favourites.js" defer></script>
  <script src="/public/scripts/get-subcategories.js" defer></script>
  <script src="/public/scripts/filters.js" defer></script>
</__additional_script__>
  <div metal:fill-slot="title" tal:omit-tag="True">
    <title> An√∫ncios | Classify</title>
  </div>
  <__additional_stylesheet__ metal:fill-slot="additional_stylesheet" tal:omit-tag="True">
    <style>
      .fa-heart {
        transition: transform .3s ease, color .3s ease;
      }

      .fa-heart:hover {
        color: #FF4367;
        transform: scale(1.3);
      }

      .fa-heart.active {
        color: #FF4367;
        transform: scale(1.3);
      }
    </style>
  </__additional_stylesheet__>
  <div metal:fill-slot="content" tal:omit-tag="True">

    <div
      class="page_banner bg_cover"
      style="background-image: url(/public/assets/images/page-banner.jpg)">
      <div class="container">
        <div class="page_banner_content">
          <h3 class="title">Product Listing</h3>
          <ul class="breadcrumb">
            <li><a href="/">Home</a></li>
            <li>Product Listing</li>
          </ul>
        </div>
      </div>
    </div>

    <!--====== HEADER PART ENDS ======-->

    <!--====== PRODUCT PAGE PART START ======-->

    <section class="product_page pt-70 pb-120">
      <div class="container">
        <div class="row">
          <div class="col-lg-3">
            <div class="product_sidebar pt-20">
              <div class="sidebar_categories mt-30">
                <div class="sidebar_title">
                  <h5 class="title">Categories</h5>
                </div>
                <div class="sidebar_categories_content">
                  <div class="accordion" id="accordionExample">
                  <__repeat tal:repeat="category all_categories" tal:omit-tag="True">
                    <div class="card">
                      <div class="card-header" id="headingOne">
                        <a
                          style="cursor: pointer"
                          >
                          <i class="${category.category_icon}" style="color: #ff4367"></i>
                          ${category.category_name} (${category.count_total_ads})</a
                        >
                      </div>

                      <div
                        class="collapse"
                      >
                        <div class="card-body">
                          <ul class="sidebar_categories_list">
                          <__repeat tal:repeat="subcategory category.subcategories" tal:omit-tag="True">
                            <li><a href="/ads/subcategory/${subcategory.id}">
                            ${subcategory.subcategory_name} (${subcategory.count_total_ads})</a></li>
                          </__repeat>
                          </ul>
                        </div>
                      </div>
                    </div>
                  </__repeat>
                    
                  </div>
                </div>
              </div>

              <div class="sidebar_price_range mt-30">
                <div class="sidebar_title">
                  <h5 class="title">Price Range</h5>
                </div>
                <div class="price_range_content">
                  <div class="range-slider">
                    <input type="text" class="js-range-slider" value="" />
                  </div>
                  <div class="extra-controls">
                    <input type="text" class="js-input-from" value="0" />
                    <input type="text" class="js-input-to" value="0" />
                  </div>
                </div>
              </div>

              <div class="sidebar_discount mt-30">
                <div class="sidebar_title">
                  <h5 class="title">Top Deals</h5>
                </div>
                <div class="discount_content">
                  <ul class="discount_radio">
                    <li>
                      <input type="radio" checked="" name="radio" id="radio1" />
                      <label for="radio1"></label> <span>Flat 10% Off</span>
                    </li>

                    <li>
                      <input type="radio" name="radio" id="radio2" />
                      <label for="radio2"></label> <span>Flat 20% Off</span>
                    </li>

                    <li>
                      <input type="radio" name="radio" id="radio3" />
                      <label for="radio3"></label> <span>Flat 50% Off</span>
                    </li>
                  </ul>
                </div>
              </div>

              <div class="sidebar_rating mt-30">
                <div class="sidebar_title">
                  <h5 class="title">Top Deals</h5>
                </div>
                <div class="rating_content">
                  <ul class="rating_checkbox">
                    <li>
                      <input
                        type="checkbox"
                        checked=""
                        name="checkbox"
                        id="checkbox1"
                      />
                      <label for="checkbox1"></label>
                      <span>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                      </span>
                      <span class="count">(25)</span>
                    </li>
                    <li>
                      <input type="checkbox" name="checkbox" id="checkbox2" />
                      <label for="checkbox2"></label>
                      <span>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fal fa-star"></i>
                      </span>
                      <span class="count">(17)</span>
                    </li>
                    <li>
                      <input type="checkbox" name="checkbox" id="checkbox3" />
                      <label for="checkbox3"></label>
                      <span>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fal fa-star"></i>
                        <i class="fal fa-star"></i>
                      </span>
                      <span class="count">(12)</span>
                    </li>
                    <li>
                      <input type="checkbox" name="checkbox" id="checkbox4" />
                      <label for="checkbox4"></label>
                      <span>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fal fa-star"></i>
                        <i class="fal fa-star"></i>
                        <i class="fal fa-star"></i>
                      </span>
                      <span class="count">(2)</span>
                    </li>
                    <li>
                      <input type="checkbox" name="checkbox" id="checkbox5" />
                      <label for="checkbox5"></label>
                      <span>
                        <i class="fas fa-star"></i>
                        <i class="fal fa-star"></i>
                        <i class="fal fa-star"></i>
                        <i class="fal fa-star"></i>
                        <i class="fal fa-star"></i>
                      </span>
                      <span class="count">(5)</span>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>

          <div class="col-lg-9">
            <div
              class="product_topbar d-md-flex align-items-center justify-content-between"
            >
              <div class="product_select pt-40 d-flex flex-wrap">
              <form style="width: 100%; display: flex;">
                <select id="city-select" class="limit">
                  <option value="none">Localiza√ß√£o</option>
                  <__repeat tal:repeat="city all_cities" tal:omit-tag="True">
                    <option data-id="city.id" value="${city}">${city}</option>
                  </__repeat>
                </select>
                <select id="category-select" class="limit">
                    <option value="none">Categoria</option>
                    <__repeat tal:repeat="category all_categories" tal:omit-tag="True">
                      <option value="${category.id}">${category.category_name}</option>
                    </__repeat>
                </select>
                <select id="subcategories-select" class="limit" name="subcategory">
                  <option value="none">Subcategoria</option>
                </select>
                <select id="recency-select" class="limit">
                  <option value="none">Ordenar Por</option>
                  <option value="recent">Mais Recentes</option>
                  <option value="old">Mais Antigos</option>
                </select>
                <select id="alphabetic-select" class="limit">
                  <option value="asc">A-Z</option>
                  <option value="desc">Z-A</option>
                </select>
              </form>
              </div>
              <div class="product_tab_menu mt-50">
                <ul
                  class="nav justify-content-center"
                  id="myTab"
                  role="tablist"
                >
                  <li class="nav-item">
                    <a
                      class="active"
                      id="grid-tab"
                      data-toggle="tab"
                      href="#grid"
                      role="tab"
                      aria-controls="grid"
                      aria-selected="true"
                    >
                      <i class="fal fa-th"></i>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a
                      id="list-tab"
                      data-toggle="tab"
                      href="#list"
                      role="tab"
                      aria-controls="list"
                      aria-selected="false"
                    >
                      <i class="fal fa-th-list"></i>
                    </a>
                  </li>
                </ul>
              </div>
            </div>
            
            <div class="tab-content" id="myTabContent">
              <div
                class="tab-pane fade show active"
                id="grid"
                role="tabpanel"
                aria-labelledby="grid-tab"
              >

                <div class="product_grid">
                  <div class="row" id="ads-container" tal:condition='len(all_ads) > 0'>
                    <__repeat tal:repeat="ad all_ads" tal:omit-tag="True">
                      <div class="col-xl-4 col-sm-6">
                        <div class="single_ads_card mt-30">
                          <div class="ads_card_image">
                            <img
                              src="${ad.main_image}"
                              alt="ads"
                            />
                          </div>
                          <div class="ads_card_content">
                            <div class="meta d-flex justify-content-between">
                              <p>${ad.subcategory.subcategory_name}</p>
                              <div tal:condition="is_logged_in" tal:omit-tag="True">
                                <a tal:condition="ad.id not in user.fav_ads_id" style="cursor: pointer;" class="like" data-adid="${ad.id}"><i class="fal fa-heart"></i></a>
                                <a tal:condition="ad.id in user.fav_ads_id" style="cursor: pointer;" class="like" data-adid="${ad.id}"><i class="fal fa-heart active"></i></a>
                              </div>
                              <div tal:condition="not is_logged_in" tal:omit-tag="True">
                                <a style="cursor: pointer;" class="like" data-adid="${ad.id}"><i class="fal fa-heart"></i></a>
                              </div>
                            </div>
                            <h4 class="title">
                              <a href="/ad/${ad.id}"
                                >${ad.title}</a
                              >
                            </h4>
                            <p>
                              <i class="fal fa-map-marker-alt"></i>${ad.address.country}, 
                              ${ad.address.city}
                            </p>
                            <div
                              class="ads_price_date d-flex justify-content-between"
                            >
                              <span class="price">${ad.price}‚Ç¨</span>
                              <span class="date">${ad.pretty_date}</span>
                            </div>
                          </div>
                        </div>
                      </div>
                    </__repeat>
                  </div>
                  <div tal:condition='len(all_ads) == 0' class="row" style="margin-inline: 10rem;">
                    <p>Ooops! Parece que nossos an√∫ncios foram abduzidos! Que tal desapegar e come√ßar a anunciar agora mesmo? üëΩ</p>
                    <img style="width: 30rem;" src="/public/assets/images/empty-result.svg" alt="Resultado vazio">
                  </div>
                </div>
              </div>
              <div
                class="tab-pane fade"
                id="list"
                role="tabpanel"
                aria-labelledby="list-tab"
              >
                <div class="product_list">
                <__repeat tal:repeat="ad all_ads" tal:omit-tag="True">
                  <div class="single_ads_card ads_list d-sm-flex mt-30">
                    <div class="ads_card_image">
                      <img src="${ad.main_image}" alt="ads" />
                    </div>
                    <div class="ads_card_content media-body">
                      <div class="meta d-flex justify-content-between">
                        <p>${ad.subcategory.subcategory_name}</p>
                        <div tal:condition="is_logged_in" tal:omit-tag="True">
                          <a tal:condition="ad.id not in user.fav_ads_id" style="cursor: pointer;" class="like" data-adid="${ad.id}"><i class="fal fa-heart"></i></a>
                          <a tal:condition="ad.id in user.fav_ads_id" style="cursor: pointer;" class="like" data-adid="${ad.id}"><i class="fal fa-heart active"></i></a>
                        </div>
                        <div tal:condition="not is_logged_in" tal:omit-tag="True">
                          <a style="cursor: pointer;" class="like" data-adid="${ad.id}"><i class="fal fa-heart"></i></a>
                        </div>
                      </div>
                      <h4 class="title">
                        <a href="#"
                          >${ad.title}</a
                        >
                      </h4>
                      <p><i class="fal fa-map-marker-alt"></i>${ad.address.country}, 
                            ${ad.address.city}</p>
                      <p>
                        ${ad.ad_description}
                      </p>
                      <div
                        class="ads_price_date d-flex justify-content-between"
                      >
                        <span class="price">${ad.price}‚Ç¨</span>
                        <span class="date">${ad.pretty_date}</span>
                      </div>
                    </div>
                  </div>
                </__repeat>
                </div>
              </div>
            </div>
            <div class="pagination_wrapper mt-50">
              <ul class="pagination justify-content-center">
                <li>
                  <a class="Previous" href="#"
                    ><i class="fal fa-angle-left"></i
                  ></a>
                </li>
                <li><a class="number" href="#">1</a></li>
                <li><a class="number active" href="#">2</a></li>
                <li><a class="number" href="#">3</a></li>
                <li>
                  <a class="next" href="#"
                    ><i class="fal fa-angle-right"></i
                  ></a>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!--====== PRODUCT PAGE PART ENDS ======-->
  </div>
</div>